<div class="container">
    <% if(pages == 0){ %>
        <p class="text-muted">暂无相关文章</p>    
    <% } %>
    <ul>
        <% posts.forEach(function(post){ %>
            <li>
                <a href="/posts/<%= post.ID %>">
                    <%= post.post_title %>
                </a>
                <span><%= dateFormat(post.post_date, null, true) %></span>
            </li>
        <% }) %>
    </ul>
    
    <% 
        var base_url = key 
                        ? '/posts?key=' + key + '&page='
                        : '/posts?page=';
    %>

    <% if(pages != 0){ %>
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <% if(current_page == 1 ) {%>
                <li class="disabled">
                    <a href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            <% }else{ %>
                <li>
                    <a href="<%= base_url %>1" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            <% } %>
    
            <%
                var page_start = current_page -2 > 0  ? current_page -2 : 1;
                var page_end = page_start + 4 > pages ? pages : page_start + 4;
            %>
    
            <% if(page_start > 1) {%>
                <li><a>...</a></li>
            <% } %>
    
            <% for(var i = page_start; i <= page_end; i++){ %>
                <% if(i == current_page){ %>
                    <li class="disabled"><a href="#"><%= i %></a></li> 
                <% }else{ %>
                    <li><a href="<%= base_url %><%= i %>"><%= i %></a></li> 
                <% } %>  
            <% } %>
    
            <% if(page_end < pages) {%>
                <li><a>...</a></li>
            <% } %>
    
            <% if(current_page == pages ) {%>
                <li class="disabled">
                    <a href="#" aria-label="Previous">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            <% }else{ %>
                <li>
                    <a href="<%= base_url %><%= pages%>" aria-label="Previous">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            <% } %>
        </ul>
    </nav>
    <% } %>
</div>