<div class="container">
  <form class="form-horizontal" action="/wikis" method="POST">
    <legend>新增wiki</legend>
    <div class="form-group">
      <label class="col-sm-2 control-label">标题</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name="title" autofocus>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label">正文</label>
      <div class="col-sm-10">
        <div id="editor"></div>
        <textarea name="content" class="form-control hidden" cols="30" rows="10"></textarea>
      </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-primary">提交</button>
        </div>
    </div>
  </form>
  <div id="preview"></div>
</div>
<script>
  $(function () {
    var E = window.wangEditor
    var editor = new E('#editor')
    editor.customConfig.uploadImgShowBase64 = true
    // 监控变化，同步更新到 textarea
    editor.customConfig.onchange = function (html) {
      $('textarea[name=content]').val(html)
      $('#preview').html(html)
    }
    editor.create()
  })
</script>