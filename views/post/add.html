<div class="container">
  <% if(typeof(error) !== 'undefined' && error) {%>
  <div class="alert alert-danger">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>            
      <strong><%= error %></strong>
  </div>
  <% } %>
  <form class="form-horizontal" action="/post" method="POST">
      <legend>新增文章</legend>
      <div class="form-group">
          <label class="col-sm-2 control-label">标题</label>
          <div class="col-sm-10">
          <input type="text" class="form-control" name="title" placeholder="" autofocus>
          </div>
      </div>
      <div class="form-group">
          <label class="col-sm-2 control-label">正文</label>
          <div class="col-sm-10">
            <div id="editor"></div>
            <textarea class="form-control hidden" name="content" cols="30" rows="10"></textarea>
          </div>
      </div>
      <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" class="btn btn-primary">提交</button>
          </div>
      </div>
  </form>
</div>

<script>
    $(function(){
        var E = window.wangEditor
        var editor = new E('#editor')
        editor.customConfig.uploadImgShowBase64 = true   // 使用 base64 保存图片
        editor.customConfig.onchange = function (html) {
            // 监控变化，同步更新到 textarea
            $('textarea[name=content]').val(html)
        }
        editor.create()
    })
</script>